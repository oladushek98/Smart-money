async function getTransactionSourse(){try{let t=await fetch("api/transaction/getsourse",{method:"GET",headers:header,credentials:"same-origin"}),e=await t.json(),n={status:t.status,body:e.body},o=!1;0==n.body.length&&(btn_add[0].setAttribute("disabled",!1),source_select[0].setAttribute("disabled",!1),n.body=[{id:-1,name:"нет источника"}],o=!0);let a=null;for(source_select.children().remove(),i=0;i<n.body.length;i++)(a=document.createElement("option")).setAttribute("value",n.body[i].id),a.textContent=n.body[i].name,source_select.append(a);return!o&&(source_select[0].removeAttribute("disabled"),btn_add[0].removeAttribute("disabled"),!0)}catch(t){console.log(t)}}async function getTransactionDestination(t){if(void 0===t)return!1;try{let e=await fetch("api/transaction/getdest/"+t,{method:"GET",headers:header,credentials:"same-origin"}),n=await e.json(),o={status:e.status,body:n.body},a=!1;0==o.body.length&&(btn_add[0].setAttribute("disabled",!1),destination_select[0].setAttribute("disabled",!1),o.body=[{id:-1,name:"нет пункта назначения"}],a=!0);let r=null;for(destination_select.children().remove(),i=0;i<o.body.length;i++)(r=document.createElement("option")).setAttribute("value",o.body[i].id),r.textContent=o.body[i].name,destination_select.append(r);return!a&&(destination_select[0].removeAttribute("disabled"),btn_add[0].removeAttribute("disabled"),!0)}catch(t){console.log(t)}}async function createTransaction(t){const e=await fetch("api/transaction/create",{method:"PUT",body:JSON.stringify(t),headers:header,credentials:"same-origin"});return await e.json()}function compareCur(){try{let t=source_select.val().split("/")[0],e=destination_select.val().split("/")[0];if(t!==e){console.log(t," -> ",e),cur_choice_container[0].setAttribute("style","display: block;");let n=document.createElement("option");n.setAttribute("value",t),n.textContent=t,currency.children().remove(),currency.append(n),(n=document.createElement("option")).setAttribute("value",e),n.textContent=e,currency.append(n)}else console.log(t," -> ",e),cur_choice_container[0].setAttribute("style","display: none;")}catch(t){console.log(t)}}function updateAmount(t,e,n){switch(t.split("_")[0]){case"income":return updateIncomeAmount(t.split("_")[1],e,n);case"account":return updateAccountAmount(t.split("_")[1],e,n);case"cost":return updateCostAmount(t.split("_")[1],e,n)}}function updateIncomeAmount(t,e,n){let i,o=$("#finNode_"+t),a=o.parent().children()[2].children[0].textContent;i=+a.split(" ")[1]+ +e;let r=a.split(" ")[0]+" "+i;o.parent().children()[2].children[0].textContent=r}function updateAccountAmount(t,e,n){let i,o=$("#finNode_"+t),a=o.parent().children()[2].children[0].textContent;i=n?+a.split(" ")[1]-+e:+a.split(" ")[1]+ +e;let r=a.split(" ")[0]+" "+i;o.parent().children()[2].children[0].textContent=r}function updateCostAmount(t,e,n){let i=$("#finNode_"+t),o=i.parent().children()[2].children[0].textContent,a=+o.split(" ")[1]+ +e,r=o.split(" ")[0]+" "+a;i.parent().children()[2].children[0].textContent=r}async function deleteTransaction(t){const e=await fetch("api/transaction/delete",{method:"PUT",body:JSON.stringify({id:t}),headers:header,credentials:"same-origin"});return await e.json()}