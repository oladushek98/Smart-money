<div>
    <div class="sm-modal-account">
        <div class="sm-modal_header"></div>

        <div class="sm-modal_body">
            <div class="sm-modal_input-line">
                <input id="title1" class="sm-input"
                       placeholder="Где вы храните деньги? *">
                <div class="sm-input_underline"></div>
                <div class="z-depth-3 sm-modal-icon"></div>
            </div>

            <div class="sm-modal_input-line">
                <input id="amount" class="sm-input"
                       placeholder="Сколько там сейчас денег? ">
            </div>

            <div class="sm-modal_input-line sm-modal_input-currency">
                <div class="currency-input-label">Валюта</div>
                {{ ACCOUNT_CREATE_FORM.currency }}
            </div>

            <div class="sm-modal_input-line sm-modal_input-currency">
                <div class="account-checkbox-label">Учитывать в общем балансе?
                </div>
                <div class="switch">
                    <label>
                        Нет
                        {{ ACCOUNT_CREATE_FORM.take_into_balance }}
                        <span class="lever"></span>
                        Дв
                    </label>
                </div>
{#                <select id="take_into_balance">#}
{#                    <option value=1>Да</option>#}
{#                    <option value=0>Нет</option>#}
{#                </select>#}
            </div>

        </div>

        <div class="sm-modal-footer">
            <input id="add-account" class="sm-modal_submit-button" type="button"
                   value="добавить">
        </div>

    </div>
</div>

<script>
    let accountCreate = async (event) => {
        let body = {
            name: $('#title1').val(),
            amount: $('#amount').val(),
            currency: $('#id_currency').val(),
            take_into_balance: String($('#id_take_into_balance')[0].checked)
        };

        const csrftoken = $('input[name="csrfmiddlewaretoken"]').attr('value');
        let header = new Headers();
        header.append('X-CSRFToken', csrftoken);

        let response = await fetch('{% url 'create_account' %}',
            {
                method: 'PUT',
                body: JSON.stringify(body),
                headers: header,
                credentials: 'same-origin'
            }
        );
        if (response.ok) {
            if (body.amount == '') {
                body.amount = 0;
            }
            const resp_body = await response.json();
            $('#title1').val('');
            $('#amount').val('');
            $('#modal2').modal('close');
            addNewAccount(
                resp_body.id,
                resp_body.name,
                resp_body.amount,
                resp_body.currency,
                resp_body.take_into_balance
            );
        }
    };

    $(document).ready(() => {
        $('#add-account').on('click', accountCreate)
    });

</script>