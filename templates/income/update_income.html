{% extends 'base.html' %}

{% block content %}
    <div class="sm-dashboard">
        <div class="sm-dashboard-body">
            <div class="sm-dashboard-column">
                <div class="sm-update-form z-depth-1">
                    {% include 'forms/update_delete_form_income.html' %}
                </div>
            </div>
            <div class="sm-dashboard-column">

            </div>
        </div>
    </div>
{% endblock %}

{% block scrypt %}
    $(document).ready(function(){
    $('.modal').modal();
    });

    let deleteNode = async (id, flag) => {
    const body = {
    'id': id,
    'flag': flag,
    };

    const csrftoken = $('input[name="csrfmiddlewaretoken"]').attr('value');
    let header = new Headers();
    header.append('X-CSRFToken', csrftoken);

    let response = await fetch('{% url 'delete_income' %}',
    {
    method: 'PUT',
    body: JSON.stringify(body),
    headers: header,
    credentials: 'same-origin'
    }
    );

    if(response.ok){
    window.location.href = 'http://localhost:8000/user'
    }
    }
{% endblock %}